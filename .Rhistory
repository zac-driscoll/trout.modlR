tibble::rownames_to_column("year") %>%
dplyr::mutate(fishery = .x),
data.frame(year = NA, yield = NA, fishery = NA)
)
) %>%
na.omit()
df1
devtools::load_all()
graph_catchPlot(zz,"harvest")
graph_catchPlot(zz,"harvest")
devtools::load_all()
graph_catchPlot(zz,"harvest")
devtools::load_all()
graph_catchPlot(zz,"harvest")
devtools::load_all()
graph_catchPlot(zz,"harvest")
process_catch_data(zz,"harvest")
process_catch_data(zz,"yieal")
process_catch_data(zz,"yield
)
process_catch_data(zz,"yield)
process_catch_data(zz,"yield")
devtools::load_all()
graph_catchPlot(zz,"harvest")
devtools::load_all()
graph_catchPlot(zz,"harvest")
devtools::load_all()
graph_catchPlot(zz,"harvest")
process_catch_data(zz,"yield")
process_catch_data(zz,"yield")$yield
process_catch_data(zz,"yield")$yield %>% class()
test_catch <- process_catch_data(zz,"harvest")
format_catchPlot_title(zz,"harvest",title = "Y")
format_catchPlot_title <- function(dat,type,title){
spp <- get_parameters(dat,"spp")
mu <- get_parameter(dat,"mu")
gtitle <-
ifelse(type == "harvest",
paste0("Commercial and Recreational ",
spp, " Harvest in ", mu),
"yield" == paste0("Yield of ", spp, " in ", mu))
gtitle <- if(title=="N"){gtitle <- ""}
return(gtitle)
}
test_catch <- process_catch_data(zz,"harvest")
format_catchPlot_title(zz,"harvest",title = "Y")
format_catchPlot_title <- function(dat,type,title){
spp <- get_parameters(dat,"spp")
mu <- get_parameter(dat,"mu")
gtitle <-
ifelse(type == "harvest",
paste0("Commercial and Recreational ",
spp, " Harvest in ", mu),
"yield" == paste0("Yield of ", spp, " in ", mu))
gtitle <- if(title=="N"){gtitle <- ""}
return(gtitle)
}
test_catch <- process_catch_data(zz,"harvest")
format_catchPlot_title(zz,type = "harvest",title = "Y")
devtools::load_all()
graph_catchPlot(zz,"harvest")
devtools::load_all()
graph_catchPlot(zz,"harvest")
devtools::load_all()
graph_catchPlot(zz,"harvest")
test_title <- format_catchPlot_title(zz,"harvest",title = "Y")
test_title
devtools::load_all()
zz <- dget("data/GB_WF_WN.rdat")
test_catch <- process_catch_data(zz,"harvest")
devtools::load_all()
test_catch <- process_catch_data(zz,"harvest")
test_title <- format_catchPlot_title(zz,"harvest",title = "Y")
devtools::load_all()
usethis::use_pipe)_
usethis::use_pipe()
devtools::document()
devtools::load_all()
devtools::document()
usethis::use_pipe()
devtools::document()
devtools::load_all()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
usethis::use_pipe()
devtools::load_all()
test_catch <- process_catch_data(zz,"harvest")
test_title <- format_catchPlot_title(zz,"harvest",title = "Y")
dat <- zz
type <- "harvest"
title == "Y"
title <0 "Y"
title <- "Y"
spp <- get_parameters(dat,"spp")
mu <- get_parameter(dat,"mu")
spp
zz$info$species
devtools::load_all()
test_catch <- process_catch_data(zz,"harvest")
test_title <- format_catchPlot_title(zz,"harvest",title = "Y")
test_title
get_parameter(zz,"spp")
test_title <- format_catchPlot_title(zz,"harvest",title = "Y")
spp <- get_parameters(dat,"spp")
mu <- get_parameter(dat,"mu")
get_parameter(zz,"spp")
get_parameter(zz,"spp") %>% class()
devtools::load_allI()
devtools::load_all()
test_title <- format_catchPlot_title(zz,"harvest",title = "Y")
spp <- get_parameter(dat,"spp")
mu <- get_parameter(dat,"mu")
gtitle <-
ifelse(type == "harvest",
paste0("Commercial and Recreational ",
spp, " Harvest in ", mu),
paste0("Yield of ", spp, " in ", mu))
gtitle <- if(title == "N"){gtitle <- ""}
spp <- get_parameter(dat,"spp")
mu <- get_parameter(dat,"mu")
gtitle <-
ifelse(type == "harvest",
paste0("Commercial and Recreational ",
spp, " Harvest in ", mu),
paste0("Yield of ", spp, " in ", mu))
if(title == "N"){gtitle <- ""}
devtools::load_all()
devtools::load_all()
zz <- dget("data/GB_WF_WN.rdat")
graph_catchPlot(zz,"harvest")
test_catch <- process_catch_data(zz,"harvest")
test_title <- format_catchPlot_title(zz,"harvest",title = "Y")
years <- get_parameter(dat,"years")
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
ggplot2::scale_x_continuous(breaks = seq(min(years),
max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
catch_dat <- process_catch_data(zz,"harvest")
gtitle <- format_catchPlot_title(zz,"harvest",title = "Y")
dat <- zz
years <- get_parameter(dat,"years")
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
ggplot2::scale_x_continuous(breaks = seq(min(years),
max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
p
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
ggplot2::scale_x_c(breaks = seq(min(years),
max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
ggplot2::scale_x_discete(breaks = seq(min(years),
max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
ggplot2::scale_x_discrete(breaks = seq(min(years),
max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
p
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
# ggplot2::scale_x_discrete(breaks = seq(min(years),
#                                          max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
p
years <- get_parameter(dat,"years")
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
# ggplot2::scale_x_discrete(breaks = seq(min(years),
#                                          max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
p
catch_dat
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
))
p
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity")
p
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title)
p
title <- gtitle
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
ggplot2::scale_x_continious(breaks = seq(min(years),
max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
ggplot2::scale_x_continuous(breaks = seq(min(years),
max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
p
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title)
p
p <- ggplot2::ggplot(catch_dat,
ggplot2::aes(
x = year,
y = yield / 1000,
fill = fishery
)) +
ggplot2::geom_bar(colour = "black", stat = "identity") +
ggplot2::labs(x = "Year",
y = "Number of Fish (x 1,000)",
title = title) +
# ggplot2::scale_x_continuous(breaks = seq(min(years),
#                                          max(years), 5)) +
ggplot2::scale_fill_grey("", start = 0.9, end = 0.2) +
ggplot2::theme_bw() +
format_axis(1) +
format_legend("top")
p
catch_dat
catch_dat$yea
catch_dat$year
catch_dat$yea
catch_dat$ye
catch_dat$y
catch_dat$year
catch_dat$year %>% class()
process_catch_data <- function(dat,type){
gear <- c("Gill","Trap","Trawl","Recreational")
param <- ifelse(type == "harvest",
c("GLcatN","TPcatN","TWcatN","RCcatN"),
c("obsGLcat","obsTPcat","obsTWcat","obsRCcat")
)
purrr::map2_df(
.x = gear,
.y = param,
.f =
purrr::possibly(
~ get_parameter(dat, .y) %>%
data.frame() %>%
dplyr::rename(yield = 1) %>%
tibble::rownames_to_column("year") %>%
dplyr::mutate(fishery = .x,
year = as.numeric(year)),
data.frame(
year = NA,
yield = NA,
fishery = NA
)
)
) %>%
na.omit()
}
catch_dat <- process_catch_data(zz,"harvest")
gtitle <- format_catchPlot_title(zz,"harvest",title = "Y")
catch_dat$year
devtools::load_all()
dat <- dget("data/GB_WF_WN.rdat")
rm(dat)
graph_catchPlot(zz,"harvest")
zz <- dget("data/GB_WF_WN.rdat")
graph_catchPlot(zz,"harvest")
graph_catchPlot(zz,"s")
graph_catchPlot(zz,"yield")
#catch plots
catch_dat <- process_catch_data(zz,"harvest")
catch_dat
graph_catchPlot(zz,"yield")
#bms plots
make_bmsPlot(zz)
get_parameter(zz,"Biomass")
get_parameter(zz,"SpBiomass")
zz <- dget("data/GB_WF_AR.rdat")
zz2 <- dget("data/GB_WF_WN.rdat")
#catch plots
catch_dat <- process_catch_data(zz,"harvest")
graph_catchPlot(zz,"yield")
graph_catchPlot(zz,"harvest")
graph_catchPlot(zz,"yield")
#bms plots
make_bmsPlot(zz)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
read.csv(file$datapath, header = input$header)
})
}
shinyApp(ui, server)
library(shiny)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
read.csv(file$datapath, header = input$header)
})
}
shinyApp(ui, server)
devtools::load_all()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
devtools::load_all()
model_output_app()
dget(rdata)
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
load("data/GB_WF_AR.rdat")
load(dget("data/GB_WF_AR.rdat"))
class((dget("data/GB_WF_AR.rdat")))
zz <- (dget("data/GB_WF_AR.rdat")
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
devtools::load_all()
model_output_app()
